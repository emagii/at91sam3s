<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SAM3S Software Package: S:/projets/EK/SAM3S-EK/sam3s_project_trunk/libraries/libboard_sam3s-ek/source/ili9325.c Source File</title>
<link href="common/style.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
    <div id="body">
        <div id="title">SAM3S Software Package 2.1</div>
        <div id="banner"></div>

<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_bcc78437aa20a9e08ae4ab86f04766f4.html">libraries</a>      </li>
      <li><a class="el" href="dir_4b907f4dc7b9a1344e6ae24879d2adf7.html">libboard_sam3s-ek</a>      </li>
      <li><a class="el" href="dir_786818fe2f9db2e8a1741e153682c92b.html">source</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>ili9325.c</h1>  </div>
</div>
<div class="contents">
<a href="ili9325_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ----------------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment"> *         ATMEL Microcontroller Software Support</span>
<a name="l00003"></a>00003 <span class="comment"> * ----------------------------------------------------------------------------</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (c) 2010, Atmel Corporation</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * All rights reserved.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00009"></a>00009 <span class="comment"> * modification, are permitted provided that the following conditions are met:</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * - Redistributions of source code must retain the above copyright notice,</span>
<a name="l00012"></a>00012 <span class="comment"> * this list of conditions and the disclaimer below.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * Atmel&#39;s name may not be used to endorse or promote products derived from</span>
<a name="l00015"></a>00015 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * DISCLAIMER: THIS SOFTWARE IS PROVIDED BY ATMEL &quot;AS IS&quot; AND ANY EXPRESS OR</span>
<a name="l00018"></a>00018 <span class="comment"> * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span>
<a name="l00019"></a>00019 <span class="comment"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE</span>
<a name="l00020"></a>00020 <span class="comment"> * DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<a name="l00021"></a>00021 <span class="comment"> * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00022"></a>00022 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,</span>
<a name="l00023"></a>00023 <span class="comment"> * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF</span>
<a name="l00024"></a>00024 <span class="comment"> * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</span>
<a name="l00025"></a>00025 <span class="comment"> * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,</span>
<a name="l00026"></a>00026 <span class="comment"> * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 <span class="comment"> * ----------------------------------------------------------------------------</span>
<a name="l00028"></a>00028 <span class="comment"> */</span>
<a name="l00029"></a>00029 <span class="comment"></span>
<a name="l00030"></a>00030 <span class="comment">/**</span>
<a name="l00031"></a>00031 <span class="comment"> * \file</span>
<a name="l00032"></a>00032 <span class="comment"> *</span>
<a name="l00033"></a>00033 <span class="comment"> * Implementation of ILI9325 driver.</span>
<a name="l00034"></a>00034 <span class="comment"> *</span>
<a name="l00035"></a>00035 <span class="comment"> */</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00038"></a>00038 <span class="comment"> *        Headers</span>
<a name="l00039"></a>00039 <span class="comment"> *----------------------------------------------------------------------------*/</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="board_8h.html">board.h</a>&quot;</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="preprocessor">#ifdef BOARD_LCD_ILI9325</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00048"></a>00048 <span class="comment"> *        Local variables</span>
<a name="l00049"></a>00049 <span class="comment"> *----------------------------------------------------------------------------*/</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="comment">/* Pixel cache used to speed up communication */</span>
<a name="l00052"></a>00052 <span class="preprocessor">#define LCD_DATA_CACHE_SIZE BOARD_LCD_WIDTH</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="keyword">static</span> LcdColor_t gLcdPixelCache[LCD_DATA_CACHE_SIZE];
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00056"></a>00056 <span class="comment"> *        Export functions</span>
<a name="l00057"></a>00057 <span class="comment"> *----------------------------------------------------------------------------*/</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="comment"></span>
<a name="l00060"></a>00060 <span class="comment">/**</span>
<a name="l00061"></a>00061 <span class="comment"> * \brief Write data to LCD Register.</span>
<a name="l00062"></a>00062 <span class="comment"> *</span>
<a name="l00063"></a>00063 <span class="comment"> * \param reg   Register address.</span>
<a name="l00064"></a>00064 <span class="comment"> * \param data  Data to be written.</span>
<a name="l00065"></a>00065 <span class="comment"> */</span>
<a name="l00066"></a>00066 <span class="keyword">static</span> <span class="keywordtype">void</span> LCD_WriteReg( uint8_t reg, uint16_t <a class="code" href="_c_d_c_d_serial_driver_8h.html#a8be237b72619ea84bbc9f5d314b2696c">data</a> )
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068     <a class="code" href="ili9325_8h.html#a2eb23d96646b890b02a13d5d7735de51">LCD_IR</a>() = 0;
<a name="l00069"></a>00069     <a class="code" href="ili9325_8h.html#a2eb23d96646b890b02a13d5d7735de51">LCD_IR</a>() = reg;
<a name="l00070"></a>00070     <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>()  = (data &gt;&gt; 8) &amp; 0xFF;
<a name="l00071"></a>00071     <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>()  = data &amp; 0xFF;
<a name="l00072"></a>00072 }
<a name="l00073"></a>00073 <span class="comment"></span>
<a name="l00074"></a>00074 <span class="comment">/**</span>
<a name="l00075"></a>00075 <span class="comment"> * \brief Read data from LCD Register.</span>
<a name="l00076"></a>00076 <span class="comment"> *</span>
<a name="l00077"></a>00077 <span class="comment"> * \param reg   Register address.</span>
<a name="l00078"></a>00078 <span class="comment"> *</span>
<a name="l00079"></a>00079 <span class="comment"> * \return      Readed data.</span>
<a name="l00080"></a>00080 <span class="comment"> */</span>
<a name="l00081"></a>00081 <span class="keyword">static</span> uint16_t LCD_ReadReg( uint8_t reg )
<a name="l00082"></a>00082 {
<a name="l00083"></a>00083     uint16_t value;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     <a class="code" href="ili9325_8h.html#a2eb23d96646b890b02a13d5d7735de51">LCD_IR</a>() = 0;
<a name="l00086"></a>00086     <a class="code" href="ili9325_8h.html#a2eb23d96646b890b02a13d5d7735de51">LCD_IR</a>() = reg;
<a name="l00087"></a>00087 
<a name="l00088"></a>00088     value = <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>();
<a name="l00089"></a>00089     value = (value &lt;&lt; 8) | <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>();
<a name="l00090"></a>00090 
<a name="l00091"></a>00091     <span class="keywordflow">return</span> value;
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="comment"></span>
<a name="l00095"></a>00095 <span class="comment">/**</span>
<a name="l00096"></a>00096 <span class="comment"> * \brief Prepare to write GRAM data.</span>
<a name="l00097"></a>00097 <span class="comment"> */</span>
<a name="l00098"></a><a class="code" href="ili9325_8c.html#a32191c468d4e86b00c5d4658cdc3952e">00098</a> <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ili9325_8h.html#a32191c468d4e86b00c5d4658cdc3952e" title="Prepare to write GRAM data.">LCD_WriteRAM_Prepare</a>( <span class="keywordtype">void</span> )
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100     <a class="code" href="ili9325_8h.html#a2eb23d96646b890b02a13d5d7735de51">LCD_IR</a>() = 0 ;
<a name="l00101"></a>00101     <a class="code" href="ili9325_8h.html#a2eb23d96646b890b02a13d5d7735de51">LCD_IR</a>() = ILI9325_R22H ; <span class="comment">/* Write Data to GRAM (R22h)  */</span>
<a name="l00102"></a>00102 }
<a name="l00103"></a>00103 <span class="comment"></span>
<a name="l00104"></a>00104 <span class="comment">/**</span>
<a name="l00105"></a>00105 <span class="comment"> * \brief Write data to LCD GRAM.</span>
<a name="l00106"></a>00106 <span class="comment"> *</span>
<a name="l00107"></a>00107 <span class="comment"> * \param color  24-bits RGB color.</span>
<a name="l00108"></a>00108 <span class="comment"> */</span>
<a name="l00109"></a><a class="code" href="ili9325_8c.html#adf40cbc95287b07241233d3bf59573e6">00109</a> <span class="keyword">extern</span>  <span class="keywordtype">void</span> <a class="code" href="ili9325_8h.html#adf40cbc95287b07241233d3bf59573e6" title="Write data to LCD GRAM.">LCD_WriteRAM</a>( LcdColor_t dwColor )
<a name="l00110"></a>00110 {
<a name="l00111"></a>00111     <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = ((dwColor &gt;&gt; 16) &amp; 0xFF);
<a name="l00112"></a>00112     <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = ((dwColor &gt;&gt; 8) &amp; 0xFF);
<a name="l00113"></a>00113     <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = (dwColor &amp; 0xFF);
<a name="l00114"></a>00114 }
<a name="l00115"></a>00115 <span class="comment"></span>
<a name="l00116"></a>00116 <span class="comment">/**</span>
<a name="l00117"></a>00117 <span class="comment"> * \brief Write mutiple data in buffer to LCD controller.</span>
<a name="l00118"></a>00118 <span class="comment"> *</span>
<a name="l00119"></a>00119 <span class="comment"> * \param pBuf  data buffer.</span>
<a name="l00120"></a>00120 <span class="comment"> * \param size  size in pixels.</span>
<a name="l00121"></a>00121 <span class="comment"> */</span>
<a name="l00122"></a>00122 <span class="keyword">static</span> <span class="keywordtype">void</span> LCD_WriteRAMBuffer(<span class="keyword">const</span> LcdColor_t *pBuf, uint32_t size)
<a name="l00123"></a>00123 {
<a name="l00124"></a>00124     uint32_t addr ;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126     <span class="keywordflow">for</span> ( addr = 0 ; addr &lt; size ; addr++ )
<a name="l00127"></a>00127     {
<a name="l00128"></a>00128         <a class="code" href="ili9325_8h.html#adf40cbc95287b07241233d3bf59573e6" title="Write data to LCD GRAM.">LCD_WriteRAM</a>(pBuf[addr]);
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130 }
<a name="l00131"></a>00131 <span class="comment"></span>
<a name="l00132"></a>00132 <span class="comment">/**</span>
<a name="l00133"></a>00133 <span class="comment"> * \brief Prepare to read GRAM data.</span>
<a name="l00134"></a>00134 <span class="comment"> */</span>
<a name="l00135"></a><a class="code" href="ili9325_8c.html#ad3aad36764056cc77ef02eda61ff3905">00135</a> <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ili9325_8h.html#ad3aad36764056cc77ef02eda61ff3905" title="Prepare to read GRAM data.">LCD_ReadRAM_Prepare</a>( <span class="keywordtype">void</span> )
<a name="l00136"></a>00136 {
<a name="l00137"></a>00137     <a class="code" href="ili9325_8h.html#a2eb23d96646b890b02a13d5d7735de51">LCD_IR</a>() = 0 ;
<a name="l00138"></a>00138     <a class="code" href="ili9325_8h.html#a2eb23d96646b890b02a13d5d7735de51">LCD_IR</a>() = ILI9325_R22H ; <span class="comment">/* Write Data to GRAM (R22h)  */</span>
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 <span class="comment"></span>
<a name="l00141"></a>00141 <span class="comment">/**</span>
<a name="l00142"></a>00142 <span class="comment"> * \brief Read data to LCD GRAM.</span>
<a name="l00143"></a>00143 <span class="comment"> *</span>
<a name="l00144"></a>00144 <span class="comment"> * \note Because pixel data LCD GRAM is 18-bits, so convertion to RGB 24-bits</span>
<a name="l00145"></a>00145 <span class="comment"> * will cause low color bit lose.</span>
<a name="l00146"></a>00146 <span class="comment"> *</span>
<a name="l00147"></a>00147 <span class="comment"> * \return color  24-bits RGB color.</span>
<a name="l00148"></a>00148 <span class="comment"> */</span>
<a name="l00149"></a><a class="code" href="ili9325_8c.html#a167b866b593567da5e0553467c0cee4b">00149</a> <span class="keyword">extern</span> uint32_t <a class="code" href="ili9325_8h.html#a167b866b593567da5e0553467c0cee4b" title="Read data to LCD GRAM.">LCD_ReadRAM</a>( <span class="keywordtype">void</span> )
<a name="l00150"></a>00150 {
<a name="l00151"></a>00151     uint8_t value[2];
<a name="l00152"></a>00152     uint32_t color;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     value[0] = <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>();       <span class="comment">/* dummy read */</span>
<a name="l00155"></a>00155     value[1] = <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>();       <span class="comment">/* dummy read */</span>
<a name="l00156"></a>00156     value[0] = <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>();       <span class="comment">/* data upper byte */</span>
<a name="l00157"></a>00157     value[1] = <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>();       <span class="comment">/* data lower byte */</span>
<a name="l00158"></a>00158 
<a name="l00159"></a>00159     <span class="comment">/* Convert RGB565 to RGB888 */</span>
<a name="l00160"></a>00160     <span class="comment">/* For BGR format */</span>
<a name="l00161"></a>00161     color = ((value[0] &amp; 0xF8)) |                                  <span class="comment">/* R */</span>
<a name="l00162"></a>00162             ((value[0] &amp; 0x07) &lt;&lt; 13) | ((value[1] &amp; 0xE0) &lt;&lt; 5) | <span class="comment">/* G */</span>
<a name="l00163"></a>00163             ((value[1] &amp; 0x1F) &lt;&lt; 19);                             <span class="comment">/* B */</span>
<a name="l00164"></a>00164     <span class="keywordflow">return</span> color;
<a name="l00165"></a>00165 }
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="comment">/*----------------------------------------------------------------------------</span>
<a name="l00168"></a>00168 <span class="comment"> *        Basic ILI9225 primitives</span>
<a name="l00169"></a>00169 <span class="comment"> *----------------------------------------------------------------------------*/</span>
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 <span class="comment"></span>
<a name="l00172"></a>00172 <span class="comment">/**</span>
<a name="l00173"></a>00173 <span class="comment"> * \brief Check Box coordinates. Return upper left and bottom right coordinates.</span>
<a name="l00174"></a>00174 <span class="comment"> *</span>
<a name="l00175"></a>00175 <span class="comment"> * \param pX1      X-coordinate of upper-left corner on LCD.</span>
<a name="l00176"></a>00176 <span class="comment"> * \param pY1      Y-coordinate of upper-left corner on LCD.</span>
<a name="l00177"></a>00177 <span class="comment"> * \param pX2      X-coordinate of lower-right corner on LCD.</span>
<a name="l00178"></a>00178 <span class="comment"> * \param pY2      Y-coordinate of lower-right corner on LCD.</span>
<a name="l00179"></a>00179 <span class="comment"> */</span>
<a name="l00180"></a>00180 <span class="keyword">static</span> <span class="keywordtype">void</span> CheckBoxCoordinates( uint32_t *pX1, uint32_t *pY1, uint32_t *pX2, uint32_t *pY2 )
<a name="l00181"></a>00181 {
<a name="l00182"></a>00182     uint32_t dw;
<a name="l00183"></a>00183 
<a name="l00184"></a>00184     <span class="keywordflow">if</span> ( *pX1 &gt;= <a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a> )
<a name="l00185"></a>00185     {
<a name="l00186"></a>00186         *pX1 = <a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a>-1 ;
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188     <span class="keywordflow">if</span> ( *pX2 &gt;= <a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a> )
<a name="l00189"></a>00189     {
<a name="l00190"></a>00190         *pX2 = <a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a>-1 ;
<a name="l00191"></a>00191     }
<a name="l00192"></a>00192     <span class="keywordflow">if</span> ( *pY1 &gt;= <a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a> )
<a name="l00193"></a>00193     {
<a name="l00194"></a>00194         *pY1 = <a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a>-1 ;
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196     <span class="keywordflow">if</span> ( *pY2 &gt;= <a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a> )
<a name="l00197"></a>00197     {
<a name="l00198"></a>00198         *pY2 = <a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a>-1 ;
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200     <span class="keywordflow">if</span> (*pX1 &gt; *pX2)
<a name="l00201"></a>00201     {
<a name="l00202"></a>00202         dw = *pX1;
<a name="l00203"></a>00203         *pX1 = *pX2;
<a name="l00204"></a>00204         *pX2 = dw;
<a name="l00205"></a>00205     }
<a name="l00206"></a>00206     <span class="keywordflow">if</span> (*pY1 &gt; *pY2)
<a name="l00207"></a>00207     {
<a name="l00208"></a>00208         dw = *pY1;
<a name="l00209"></a>00209         *pY1 = *pY2;
<a name="l00210"></a>00210         *pY2 = dw;
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 <span class="comment"></span>
<a name="l00214"></a>00214 <span class="comment">/**</span>
<a name="l00215"></a>00215 <span class="comment"> * \brief Initialize the LCD controller.</span>
<a name="l00216"></a>00216 <span class="comment"> */</span>
<a name="l00217"></a><a class="code" href="ili9325_8c.html#ac2c55000925c2665c17f515fa64ebd49">00217</a> <span class="keyword">extern</span> uint32_t <a class="code" href="ili9325_8h.html#ac2c55000925c2665c17f515fa64ebd49" title="Initialize the LCD controller.">LCD_Initialize</a>( <span class="keywordtype">void</span> )
<a name="l00218"></a>00218 {
<a name="l00219"></a>00219     uint16_t chipid ;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="comment">/* Check ILI9325 chipid */</span>
<a name="l00222"></a>00222     chipid = LCD_ReadReg( ILI9325_R00H ) ; <span class="comment">/* Driver Code Read (R00h) */</span>
<a name="l00223"></a>00223     <span class="keywordflow">if</span> ( chipid != ILI9325_DEVICE_CODE )
<a name="l00224"></a>00224     {
<a name="l00225"></a>00225         printf( <span class="stringliteral">&quot;Read ILI9325 chip ID (0x%04x) error, skip initialization.\r\n&quot;</span>, chipid ) ;
<a name="l00226"></a>00226         <span class="keywordflow">return</span> 1 ;
<a name="l00227"></a>00227     }
<a name="l00228"></a>00228 
<a name="l00229"></a>00229     <span class="comment">/* Turn off LCD */</span>
<a name="l00230"></a>00230     <a class="code" href="ili9325_8h.html#adc2c2af1c7af0f497897d7495bdfa06b" title="Power down the LCD.">LCD_PowerDown</a>() ;
<a name="l00231"></a>00231 
<a name="l00232"></a>00232     <span class="comment">/* Start initial sequence */</span>
<a name="l00233"></a>00233     LCD_WriteReg(ILI9325_R10H, 0x0000); <span class="comment">/* DSTB = LP = STB = 0 */</span>
<a name="l00234"></a>00234     LCD_WriteReg(ILI9325_R00H, 0x0001); <span class="comment">/* start internal OSC */</span>
<a name="l00235"></a>00235     LCD_WriteReg(ILI9325_R01H, ILI9325_R01H_SS ) ; <span class="comment">/* set SS and SM bit */</span>
<a name="l00236"></a>00236     LCD_WriteReg(ILI9325_R02H, 0x0700); <span class="comment">/* set 1 line inversion */</span>
<a name="l00237"></a>00237     <span class="comment">//LCD_WriteReg(ILI9325_R03H, 0xD030); /* set GRAM write direction and BGR=1. */</span>
<a name="l00238"></a>00238     LCD_WriteReg(ILI9325_R04H, 0x0000); <span class="comment">/* Resize register */</span>
<a name="l00239"></a>00239     LCD_WriteReg(ILI9325_R08H, 0x0207); <span class="comment">/* set the back porch and front porch */</span>
<a name="l00240"></a>00240     LCD_WriteReg(ILI9325_R09H, 0x0000); <span class="comment">/* set non-display area refresh cycle ISC[3:0] */</span>
<a name="l00241"></a>00241     LCD_WriteReg(ILI9325_R0AH, 0x0000); <span class="comment">/* FMARK function */</span>
<a name="l00242"></a>00242     LCD_WriteReg(ILI9325_R0CH, 0x0000); <span class="comment">/* RGB interface setting */</span>
<a name="l00243"></a>00243     LCD_WriteReg(ILI9325_R0DH, 0x0000); <span class="comment">/* Frame marker Position */</span>
<a name="l00244"></a>00244     LCD_WriteReg(ILI9325_R0FH, 0x0000); <span class="comment">/* RGB interface polarity */</span>
<a name="l00245"></a>00245 
<a name="l00246"></a>00246     <span class="comment">/* Power on sequence */</span>
<a name="l00247"></a>00247     LCD_WriteReg(ILI9325_R10H, 0x0000); <span class="comment">/* SAP, BT[3:0], AP, DSTB, SLP, STB */</span>
<a name="l00248"></a>00248     LCD_WriteReg(ILI9325_R11H, 0x0000); <span class="comment">/* DC1[2:0], DC0[2:0], VC[2:0] */</span>
<a name="l00249"></a>00249     LCD_WriteReg(ILI9325_R12H, 0x0000); <span class="comment">/* VREG1OUT voltage */</span>
<a name="l00250"></a>00250     LCD_WriteReg(ILI9325_R13H, 0x0000); <span class="comment">/* VDV[4:0] for VCOM amplitude */</span>
<a name="l00251"></a>00251     <a class="code" href="timetick_8h.html#a2b6066c4eacf5089da661bd9e13bc9ed" title="Sync Wait for several ms.">Wait</a>( 200 ) ;                       <span class="comment">/* Dis-charge capacitor power voltage */</span>
<a name="l00252"></a>00252     LCD_WriteReg(ILI9325_R10H, 0x1290); <span class="comment">/* SAP, BT[3:0], AP, DSTB, SLP, STB */</span>
<a name="l00253"></a>00253     LCD_WriteReg(ILI9325_R11H, 0x0227); <span class="comment">/* DC1[2:0], DC0[2:0], VC[2:0] */</span>
<a name="l00254"></a>00254     <a class="code" href="timetick_8h.html#a2b6066c4eacf5089da661bd9e13bc9ed" title="Sync Wait for several ms.">Wait</a>( 50 ) ;
<a name="l00255"></a>00255     LCD_WriteReg(ILI9325_R12H, 0x001B); <span class="comment">/* Internal reference voltage= Vci; */</span>
<a name="l00256"></a>00256     <a class="code" href="timetick_8h.html#a2b6066c4eacf5089da661bd9e13bc9ed" title="Sync Wait for several ms.">Wait</a>( 50 ) ;
<a name="l00257"></a>00257     LCD_WriteReg(ILI9325_R13H, 0x1100); <span class="comment">/* Set VDV[4:0] for VCOM amplitude */</span>
<a name="l00258"></a>00258     LCD_WriteReg(ILI9325_R29H, 0x0019); <span class="comment">/* Set VCM[5:0] for VCOMH */</span>
<a name="l00259"></a>00259     LCD_WriteReg(ILI9325_R2BH, 0x000D); <span class="comment">/* Set Frame Rate */</span>
<a name="l00260"></a>00260     <a class="code" href="timetick_8h.html#a2b6066c4eacf5089da661bd9e13bc9ed" title="Sync Wait for several ms.">Wait</a>( 50 ) ;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     <span class="comment">/* Adjust the Gamma Curve */</span>
<a name="l00263"></a>00263     LCD_WriteReg(ILI9325_R30H, 0x0000);
<a name="l00264"></a>00264     LCD_WriteReg(ILI9325_R31H, 0x0204);
<a name="l00265"></a>00265     LCD_WriteReg(ILI9325_R32H, 0x0200);
<a name="l00266"></a>00266     LCD_WriteReg(ILI9325_R35H, 0x0007);
<a name="l00267"></a>00267     LCD_WriteReg(ILI9325_R36H, 0x1404);
<a name="l00268"></a>00268     LCD_WriteReg(ILI9325_R37H, 0x0705);
<a name="l00269"></a>00269     LCD_WriteReg(ILI9325_R38H, 0x0305);
<a name="l00270"></a>00270     LCD_WriteReg(ILI9325_R39H, 0x0707);
<a name="l00271"></a>00271     LCD_WriteReg(ILI9325_R3CH, 0x0701);
<a name="l00272"></a>00272     LCD_WriteReg(ILI9325_R3DH, 0x000e);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     LCD_SetDisplayPortrait( 0 ) ;
<a name="l00275"></a>00275     <span class="comment">/* Vertical Scrolling */</span>
<a name="l00276"></a>00276     LCD_WriteReg( ILI9325_R61H, 0x0001 ) ;
<a name="l00277"></a>00277     LCD_WriteReg( ILI9325_R6AH, 0x0000 ) ;
<a name="l00278"></a>00278 
<a name="l00279"></a>00279     <span class="comment">/* Partial Display Control */</span>
<a name="l00280"></a>00280     LCD_WriteReg(ILI9325_R80H, 0x0000);
<a name="l00281"></a>00281     LCD_WriteReg(ILI9325_R81H, 0x0000);
<a name="l00282"></a>00282     LCD_WriteReg(ILI9325_R82H, 0x0000);
<a name="l00283"></a>00283     LCD_WriteReg(ILI9325_R83H, 0x0000);
<a name="l00284"></a>00284     LCD_WriteReg(ILI9325_R84H, 0x0000);
<a name="l00285"></a>00285     LCD_WriteReg(ILI9325_R85H, 0x0000);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287     <span class="comment">/* Panel Control */</span>
<a name="l00288"></a>00288     LCD_WriteReg(ILI9325_R90H, 0x0010);
<a name="l00289"></a>00289     LCD_WriteReg(ILI9325_R92H, 0x0600);
<a name="l00290"></a>00290     LCD_WriteReg(ILI9325_R95H, 0x0110);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     LCD_SetWindow( 0, 0, <a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a>, <a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a> ) ;
<a name="l00293"></a>00293     <a class="code" href="ili9325_8h.html#abd17dd1f5a569cb53ddbbc3c293b0c80" title="Set cursor of LCD srceen.">LCD_SetCursor</a>( 0, 0 ) ;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295     <span class="keywordflow">return</span> 0 ;
<a name="l00296"></a>00296 }
<a name="l00297"></a>00297 <span class="comment"></span>
<a name="l00298"></a>00298 <span class="comment">/**</span>
<a name="l00299"></a>00299 <span class="comment"> * \brief Turn on the LCD.</span>
<a name="l00300"></a>00300 <span class="comment"> */</span>
<a name="l00301"></a><a class="code" href="ili9325_8c.html#ac0271c828fbc94248297b6b6e5b548ec">00301</a> <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ili9325_8h.html#ac0271c828fbc94248297b6b6e5b548ec" title="Turn on the LCD.">LCD_On</a>( <span class="keywordtype">void</span> )
<a name="l00302"></a>00302 {
<a name="l00303"></a>00303     <span class="comment">/* Display Control 1 (R07h) */</span>
<a name="l00304"></a>00304     <span class="comment">/* When BASEE = “1”, the base image is displayed. */</span>
<a name="l00305"></a>00305     <span class="comment">/* GON and DTE Set the output level of gate driver G1 ~ G320 : Normal Display */</span>
<a name="l00306"></a>00306     <span class="comment">/* D1=1 D0=1 BASEE=1: Base image display Operate */</span>
<a name="l00307"></a>00307     LCD_WriteReg( ILI9325_R07H,   ILI9325_R07H_BASEE
<a name="l00308"></a>00308                                 | ILI9325_R07H_GON | ILI9325_R07H_DTE
<a name="l00309"></a>00309                                 | ILI9325_R07H_D1  | ILI9325_R07H_D0 ) ;
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="comment"></span>
<a name="l00313"></a>00313 <span class="comment">/**</span>
<a name="l00314"></a>00314 <span class="comment"> * \brief Turn off the LCD.</span>
<a name="l00315"></a>00315 <span class="comment"> */</span>
<a name="l00316"></a><a class="code" href="ili9325_8c.html#ad835954411a8a87a1469e8b88cd10c60">00316</a> <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ili9325_8h.html#ad835954411a8a87a1469e8b88cd10c60" title="Turn off the LCD.">LCD_Off</a>( <span class="keywordtype">void</span> )
<a name="l00317"></a>00317 {
<a name="l00318"></a>00318     <span class="comment">/* Display Control 1 (R07h) */</span>
<a name="l00319"></a>00319     <span class="comment">/* When BASEE = “0”, no base image is displayed. */</span>
<a name="l00320"></a>00320     <span class="comment">/* When the display is turned off by setting D[1:0] = “00”, the ILI9325 internal display</span>
<a name="l00321"></a>00321 <span class="comment">       operation is halted completely. */</span>
<a name="l00322"></a>00322     <span class="comment">/* PTDE1/0 = 0: turns off partial image. */</span>
<a name="l00323"></a>00323     LCD_WriteReg( ILI9325_R07H, 0x00 ) ;
<a name="l00324"></a>00324 }
<a name="l00325"></a>00325 <span class="comment"></span>
<a name="l00326"></a>00326 <span class="comment">/**</span>
<a name="l00327"></a>00327 <span class="comment"> * \brief Power down the LCD.</span>
<a name="l00328"></a>00328 <span class="comment"> */</span>
<a name="l00329"></a><a class="code" href="ili9325_8c.html#adc2c2af1c7af0f497897d7495bdfa06b">00329</a> <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ili9325_8h.html#adc2c2af1c7af0f497897d7495bdfa06b" title="Power down the LCD.">LCD_PowerDown</a>( <span class="keywordtype">void</span> )
<a name="l00330"></a>00330 {
<a name="l00331"></a>00331     <span class="comment">/* Display Control 1 (R07h) */</span>
<a name="l00332"></a>00332     <span class="comment">/* When BASEE = “0”, no base image is displayed. */</span>
<a name="l00333"></a>00333     <span class="comment">/* GON and DTE Set the output level of gate driver G1 ~ G320 : Normal Display */</span>
<a name="l00334"></a>00334     <span class="comment">/* D1=1 D0=1 BASEE=1: Base image display Operate */</span>
<a name="l00335"></a>00335     LCD_WriteReg( ILI9325_R07H,   ILI9325_R07H_GON | ILI9325_R07H_DTE
<a name="l00336"></a>00336                                 | ILI9325_R07H_D1  | ILI9325_R07H_D0 ) ;
<a name="l00337"></a>00337 }
<a name="l00338"></a>00338 <span class="comment"></span>
<a name="l00339"></a>00339 <span class="comment">/**</span>
<a name="l00340"></a>00340 <span class="comment"> * \brief Convert 24 bit RGB color into 5-6-5 rgb color space.</span>
<a name="l00341"></a>00341 <span class="comment"> *</span>
<a name="l00342"></a>00342 <span class="comment"> * Initialize the LcdColor_t cache with the color pattern.</span>
<a name="l00343"></a>00343 <span class="comment"> * \param x  24-bits RGB color.</span>
<a name="l00344"></a>00344 <span class="comment"> * \return 0 for successfull operation.</span>
<a name="l00345"></a>00345 <span class="comment"> */</span>
<a name="l00346"></a><a class="code" href="ili9325_8c.html#adb29f5baaca6bac8047c2242b1295ba8">00346</a> <span class="keyword">extern</span> uint32_t <a class="code" href="ili9325_8h.html#adb29f5baaca6bac8047c2242b1295ba8" title="Convert 24 bit RGB color into 5-6-5 rgb color space.">LCD_SetColor</a>( uint32_t dwRgb24Bits )
<a name="l00347"></a>00347 {
<a name="l00348"></a>00348     uint32_t i ;
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     <span class="comment">/* Fill the cache with selected color */</span>
<a name="l00351"></a>00351     <span class="keywordflow">for</span> ( i = 0 ; i &lt; LCD_DATA_CACHE_SIZE ; ++i )
<a name="l00352"></a>00352     {
<a name="l00353"></a>00353         gLcdPixelCache[i] = dwRgb24Bits ;
<a name="l00354"></a>00354     }
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     <span class="keywordflow">return</span> 0;
<a name="l00357"></a>00357 }
<a name="l00358"></a>00358 <span class="comment"></span>
<a name="l00359"></a>00359 <span class="comment">/**</span>
<a name="l00360"></a>00360 <span class="comment"> * \brief Set cursor of LCD srceen.</span>
<a name="l00361"></a>00361 <span class="comment"> *</span>
<a name="l00362"></a>00362 <span class="comment"> * \param x  X-coordinate of upper-left corner on LCD.</span>
<a name="l00363"></a>00363 <span class="comment"> * \param y  Y-coordinate of upper-left corner on LCD.</span>
<a name="l00364"></a>00364 <span class="comment"> */</span>
<a name="l00365"></a><a class="code" href="ili9325_8c.html#abd17dd1f5a569cb53ddbbc3c293b0c80">00365</a> <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ili9325_8h.html#abd17dd1f5a569cb53ddbbc3c293b0c80" title="Set cursor of LCD srceen.">LCD_SetCursor</a>( uint16_t x, uint16_t y )
<a name="l00366"></a>00366 {
<a name="l00367"></a>00367     <span class="comment">/* GRAM Horizontal/Vertical Address Set (R20h, R21h) */</span>
<a name="l00368"></a>00368     LCD_WriteReg( ILI9325_R20H, x ) ; <span class="comment">/* column */</span>
<a name="l00369"></a>00369     LCD_WriteReg( ILI9325_R21H, y ) ; <span class="comment">/* row */</span>
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 <span class="keyword">extern</span> <span class="keywordtype">void</span> LCD_SetWindow( uint32_t dwX, uint32_t dwY, uint32_t dwWidth, uint32_t dwHeight )
<a name="l00373"></a>00373 {
<a name="l00374"></a>00374     <span class="comment">/* Horizontal and Vertical RAM Address Position (R50h, R51h, R52h, R53h) */</span>
<a name="l00375"></a>00375 
<a name="l00376"></a>00376     <span class="comment">/* Set Horizontal Address Start Position */</span>
<a name="l00377"></a>00377    LCD_WriteReg( ILI9325_R50H, (uint16_t)dwX ) ;
<a name="l00378"></a>00378 
<a name="l00379"></a>00379    <span class="comment">/* Set Horizontal Address End Position */</span>
<a name="l00380"></a>00380    LCD_WriteReg( ILI9325_R51H, (uint16_t)dwX+dwWidth-1 ) ;
<a name="l00381"></a>00381 
<a name="l00382"></a>00382    <span class="comment">/* Set Vertical Address Start Position */</span>
<a name="l00383"></a>00383    LCD_WriteReg( ILI9325_R52H, (uint16_t)dwY ) ;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385    <span class="comment">/* Set Vertical Address End Position */</span>
<a name="l00386"></a>00386    LCD_WriteReg( ILI9325_R53H, (uint16_t)dwY+dwHeight-1 ) ;
<a name="l00387"></a>00387 }
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 <span class="keyword">extern</span> <span class="keywordtype">void</span> LCD_SetDisplayLandscape( uint32_t dwRGB )
<a name="l00390"></a>00390 {
<a name="l00391"></a>00391     uint16_t dwValue ;
<a name="l00392"></a>00392 
<a name="l00393"></a>00393     <span class="comment">/* When AM = “1”, the address is updated in vertical writing direction. */</span>
<a name="l00394"></a>00394     <span class="comment">/* DFM Set the mode of transferring data to the internal RAM when TRI = “1”. */</span>
<a name="l00395"></a>00395     <span class="comment">/* When TRI = “1”, data are transferred to the internal RAM in 8-bit x 3 transfers mode via the 8-bit interface. */</span>
<a name="l00396"></a>00396     <span class="comment">/* Use the high speed write mode (HWM=1) */</span>
<a name="l00397"></a>00397     <span class="comment">/* ORG = “1”: The original address “00000h” moves according to the I/D[1:0] setting.  */</span>
<a name="l00398"></a>00398     <span class="comment">/* I/D[1:0] = 00 Horizontal : decrement Vertical :  decrement, AM=0:Horizontal */</span>
<a name="l00399"></a>00399     dwValue = ILI9325_R03H_AM | ILI9325_R03H_DFM | ILI9325_R03H_TRI | ILI9325_R03H_HWM | ILI9325_R03H_ORG ;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401     <span class="keywordflow">if</span> ( dwRGB == 0 )
<a name="l00402"></a>00402     {
<a name="l00403"></a>00403         <span class="comment">/* BGR=”1”: Swap the RGB data to BGR in writing into GRAM. */</span>
<a name="l00404"></a>00404         dwValue |= ILI9325_R03H_BGR ;
<a name="l00405"></a>00405     }
<a name="l00406"></a>00406     LCD_WriteReg( ILI9325_R03H, dwValue ) ;
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="comment">//    LCD_WriteReg( ILI9325_R60H, (0x1d&lt;&lt;8)|0x00 ) ; /*Gate Scan Control */</span>
<a name="l00409"></a>00409 
<a name="l00410"></a>00410     LCD_SetWindow( 0, 0, <a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a>, <a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a> ) ;
<a name="l00411"></a>00411 }
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 <span class="keyword">extern</span> <span class="keywordtype">void</span> LCD_SetDisplayPortrait( uint32_t dwRGB )
<a name="l00414"></a>00414 {
<a name="l00415"></a>00415     uint16_t dwValue ;
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     <span class="comment">/* Use the high speed write mode (HWM=1) */</span>
<a name="l00418"></a>00418     <span class="comment">/* When TRI = “1”, data are transferred to the internal RAM in 8-bit x 3 transfers mode via the 8-bit interface. */</span>
<a name="l00419"></a>00419     <span class="comment">/* DFM Set the mode of transferring data to the internal RAM when TRI = “1”. */</span>
<a name="l00420"></a>00420     <span class="comment">/* I/D[1:0] = 11 Horizontal : increment Vertical :  increment, AM=0:Horizontal */</span>
<a name="l00421"></a>00421     dwValue = ILI9325_R03H_HWM | ILI9325_R03H_TRI | ILI9325_R03H_DFM | ILI9325_R03H_ID1 | ILI9325_R03H_ID0 ;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423     <span class="keywordflow">if</span> ( dwRGB == 0 )
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425         <span class="comment">/* BGR=”1”: Swap the RGB data to BGR in writing into GRAM. */</span>
<a name="l00426"></a>00426         dwValue |= ILI9325_R03H_BGR ;
<a name="l00427"></a>00427     }
<a name="l00428"></a>00428     LCD_WriteReg( ILI9325_R03H, dwValue ) ;
<a name="l00429"></a>00429     <span class="comment">/* Gate Scan Control (R60h, R61h, R6Ah) */</span>
<a name="l00430"></a>00430     <span class="comment">/* SCN[5:0] = 00 */</span>
<a name="l00431"></a>00431     <span class="comment">/* NL[5:0]: Sets the number of lines to drive the LCD at an interval of 8 lines. */</span>
<a name="l00432"></a>00432     LCD_WriteReg( ILI9325_R60H, ILI9325_R60H_GS|(0x27&lt;&lt;8)|0x00 ) ;
<a name="l00433"></a>00433 }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 
<a name="l00436"></a>00436 <span class="keyword">extern</span> <span class="keywordtype">void</span> LCD_VerticalScroll( uint16_t wY )
<a name="l00437"></a>00437 {
<a name="l00438"></a>00438     <span class="comment">/* Gate Scan Control (R60h, R61h, R6Ah) */</span>
<a name="l00439"></a>00439     <span class="comment">/*  Enables the grayscale inversion of the image by setting REV=1. */</span>
<a name="l00440"></a>00440     <span class="comment">/* VLE: Vertical scroll display enable bit */</span>
<a name="l00441"></a>00441     LCD_WriteReg( ILI9325_R61H, 3 ) ;
<a name="l00442"></a>00442     LCD_WriteReg( ILI9325_R6AH, wY ) ;
<a name="l00443"></a>00443 }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445 
<a name="l00446"></a>00446 <span class="keyword">extern</span> <span class="keywordtype">void</span> LCD_SetPartialImage1( uint32_t dwDisplayPos, uint32_t dwStart, uint32_t dwEnd )
<a name="l00447"></a>00447 {
<a name="l00448"></a>00448     assert( dwStart &lt;= dwEnd ) ;
<a name="l00449"></a>00449 
<a name="l00450"></a>00450     <span class="comment">/* Partial Image 1 Display Position (R80h) */</span>
<a name="l00451"></a>00451     LCD_WriteReg( ILI9325_R80H, dwDisplayPos&amp;0x1ff ) ;
<a name="l00452"></a>00452     <span class="comment">/* Partial Image 1 RAM Start/End Address (R81h, R82h) */</span>
<a name="l00453"></a>00453     LCD_WriteReg( ILI9325_R81H, dwStart&amp;0x1ff ) ;
<a name="l00454"></a>00454     LCD_WriteReg( ILI9325_R82H, dwEnd&amp;0x1ff ) ;
<a name="l00455"></a>00455 }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 <span class="keyword">extern</span> <span class="keywordtype">void</span> LCD_SetPartialImage2( uint32_t dwDisplayPos, uint32_t dwStart, uint32_t dwEnd )
<a name="l00458"></a>00458 {
<a name="l00459"></a>00459     assert( dwStart &lt;= dwEnd ) ;
<a name="l00460"></a>00460 
<a name="l00461"></a>00461     <span class="comment">/* Partial Image 2 Display Position (R83h) */</span>
<a name="l00462"></a>00462     LCD_WriteReg( ILI9325_R83H, dwDisplayPos&amp;0x1ff ) ;
<a name="l00463"></a>00463     <span class="comment">/* Partial Image 2 RAM Start/End Address (R84h, R85h) */</span>
<a name="l00464"></a>00464     LCD_WriteReg( ILI9325_R84H, dwStart&amp;0x1ff ) ;
<a name="l00465"></a>00465     LCD_WriteReg( ILI9325_R85H, dwEnd&amp;0x1ff ) ;
<a name="l00466"></a>00466 }
<a name="l00467"></a>00467 <span class="comment"></span>
<a name="l00468"></a>00468 <span class="comment">/**</span>
<a name="l00469"></a>00469 <span class="comment"> * \brief Draw a LcdColor_t on LCD of given color.</span>
<a name="l00470"></a>00470 <span class="comment"> *</span>
<a name="l00471"></a>00471 <span class="comment"> * \param x  X-coordinate of pixel.</span>
<a name="l00472"></a>00472 <span class="comment"> * \param y  Y-coordinate of pixel.</span>
<a name="l00473"></a>00473 <span class="comment"> */</span>
<a name="l00474"></a><a class="code" href="ili9325_8c.html#a95791541b248a87610ca3b14c36097d8">00474</a> <span class="keyword">extern</span> uint32_t <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>( uint32_t x, uint32_t y )
<a name="l00475"></a>00475 {
<a name="l00476"></a>00476     <span class="keywordflow">if</span>( (x &gt;= <a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a>) || (y &gt;= <a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a>) )
<a name="l00477"></a>00477     {
<a name="l00478"></a>00478         <span class="keywordflow">return</span> 1;
<a name="l00479"></a>00479     }
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     <span class="comment">/* Set cursor */</span>
<a name="l00482"></a>00482     <a class="code" href="ili9325_8h.html#abd17dd1f5a569cb53ddbbc3c293b0c80" title="Set cursor of LCD srceen.">LCD_SetCursor</a>( x, y );
<a name="l00483"></a>00483 
<a name="l00484"></a>00484     <span class="comment">/* Prepare to write in GRAM */</span>
<a name="l00485"></a>00485     <a class="code" href="ili9325_8h.html#a32191c468d4e86b00c5d4658cdc3952e" title="Prepare to write GRAM data.">LCD_WriteRAM_Prepare</a>();
<a name="l00486"></a>00486     <a class="code" href="ili9325_8h.html#adf40cbc95287b07241233d3bf59573e6" title="Write data to LCD GRAM.">LCD_WriteRAM</a>( *gLcdPixelCache );
<a name="l00487"></a>00487 
<a name="l00488"></a>00488     <span class="keywordflow">return</span> 0;
<a name="l00489"></a>00489 }
<a name="l00490"></a>00490 
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 <span class="keyword">extern</span> <span class="keywordtype">void</span> LCD_TestPattern( uint32_t dwRGB )
<a name="l00494"></a>00494 {
<a name="l00495"></a>00495     uint32_t dwLine ;
<a name="l00496"></a>00496     uint32_t dw ;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     LCD_SetWindow( 10, 10, 100, 20 ) ;
<a name="l00499"></a>00499     <a class="code" href="ili9325_8h.html#abd17dd1f5a569cb53ddbbc3c293b0c80" title="Set cursor of LCD srceen.">LCD_SetCursor</a>( 10, 10 ) ;
<a name="l00500"></a>00500     <a class="code" href="ili9325_8h.html#a32191c468d4e86b00c5d4658cdc3952e" title="Prepare to write GRAM data.">LCD_WriteRAM_Prepare</a>() ;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502     <span class="keywordflow">for</span> ( dwLine=0 ; dwLine &lt; 20 ; dwLine++ )
<a name="l00503"></a>00503     {
<a name="l00504"></a>00504         <span class="comment">/* Draw White bar */</span>
<a name="l00505"></a>00505         <span class="keywordflow">for</span> ( dw=0 ; dw &lt; 20 ; dw++ )
<a name="l00506"></a>00506         {
<a name="l00507"></a>00507                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0xff ;
<a name="l00508"></a>00508                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0xff ;
<a name="l00509"></a>00509                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0xff ;
<a name="l00510"></a>00510         }
<a name="l00511"></a>00511         <span class="comment">/* Draw Red bar */</span>
<a name="l00512"></a>00512         <span class="keywordflow">for</span> ( dw=0 ; dw &lt; 20 ; dw++ )
<a name="l00513"></a>00513         {
<a name="l00514"></a>00514             <span class="keywordflow">if</span> ( dwRGB == 0 )
<a name="l00515"></a>00515             {
<a name="l00516"></a>00516                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0xff ;
<a name="l00517"></a>00517                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00518"></a>00518                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00519"></a>00519             }
<a name="l00520"></a>00520             <span class="keywordflow">else</span>
<a name="l00521"></a>00521             {
<a name="l00522"></a>00522                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00523"></a>00523                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00524"></a>00524                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0xff ;
<a name="l00525"></a>00525             }
<a name="l00526"></a>00526         }
<a name="l00527"></a>00527         <span class="comment">/* Draw Green bar */</span>
<a name="l00528"></a>00528         <span class="keywordflow">for</span> ( dw=0 ; dw &lt; 20 ; dw++ )
<a name="l00529"></a>00529         {
<a name="l00530"></a>00530                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00531"></a>00531                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0xff ;
<a name="l00532"></a>00532                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534         <span class="comment">/* Draw Blue bar */</span>
<a name="l00535"></a>00535         <span class="keywordflow">for</span> ( dw=0 ; dw &lt; 20 ; dw++ )
<a name="l00536"></a>00536         {
<a name="l00537"></a>00537             <span class="keywordflow">if</span> ( dwRGB == 0 )
<a name="l00538"></a>00538             {
<a name="l00539"></a>00539                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00540"></a>00540                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00541"></a>00541                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0xff ;
<a name="l00542"></a>00542             }
<a name="l00543"></a>00543             <span class="keywordflow">else</span>
<a name="l00544"></a>00544             {
<a name="l00545"></a>00545                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0xff ;
<a name="l00546"></a>00546                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00547"></a>00547                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00548"></a>00548             }
<a name="l00549"></a>00549         }
<a name="l00550"></a>00550         <span class="comment">/* Draw Black bar */</span>
<a name="l00551"></a>00551         <span class="keywordflow">for</span> ( dw=0 ; dw &lt; 20 ; dw++ )
<a name="l00552"></a>00552         {
<a name="l00553"></a>00553                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00554"></a>00554                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00555"></a>00555                 <a class="code" href="ili9325_8h.html#aad3294065dcd73c5ed354fd822540845">LCD_D</a>() = 0x00 ;
<a name="l00556"></a>00556         }
<a name="l00557"></a>00557     }
<a name="l00558"></a>00558 
<a name="l00559"></a>00559     LCD_SetWindow( 0, 0, <a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a>, <a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a> ) ;
<a name="l00560"></a>00560 }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 <span class="comment"></span>
<a name="l00563"></a>00563 <span class="comment">/**</span>
<a name="l00564"></a>00564 <span class="comment"> * \brief Write several pixels with the same color to LCD GRAM.</span>
<a name="l00565"></a>00565 <span class="comment"> *</span>
<a name="l00566"></a>00566 <span class="comment"> * LcdColor_t color is set by the LCD_SetColor() function.</span>
<a name="l00567"></a>00567 <span class="comment"> * This function is optimized using an sram buffer to transfer block instead of</span>
<a name="l00568"></a>00568 <span class="comment"> * individual pixels in order to limit the number of SPI interrupts.</span>
<a name="l00569"></a>00569 <span class="comment"> * \param dwX1      X-coordinate of upper-left corner on LCD.</span>
<a name="l00570"></a>00570 <span class="comment"> * \param dwY1      Y-coordinate of upper-left corner on LCD.</span>
<a name="l00571"></a>00571 <span class="comment"> * \param dwX2      X-coordinate of lower-right corner on LCD.</span>
<a name="l00572"></a>00572 <span class="comment"> * \param dwY2      Y-coordinate of lower-right corner on LCD.</span>
<a name="l00573"></a>00573 <span class="comment"> */</span>
<a name="l00574"></a><a class="code" href="ili9325_8c.html#aad99f49d91d11c317408aad209a08bea">00574</a> <span class="keyword">extern</span> uint32_t <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( uint32_t dwX1, uint32_t dwY1, uint32_t dwX2, uint32_t dwY2 )
<a name="l00575"></a>00575 {
<a name="l00576"></a>00576     uint32_t size, blocks;
<a name="l00577"></a>00577 
<a name="l00578"></a>00578     <span class="comment">/* Swap coordinates if necessary */</span>
<a name="l00579"></a>00579     CheckBoxCoordinates(&amp;dwX1, &amp;dwY1, &amp;dwX2, &amp;dwY2);
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <span class="comment">/* Determine the refresh window area */</span>
<a name="l00582"></a>00582     <span class="comment">/* Horizontal and Vertical RAM Address Position (R50h, R51h, R52h, R53h) */</span>
<a name="l00583"></a>00583     LCD_WriteReg(ILI9325_R50H, (uint16_t)dwX1);
<a name="l00584"></a>00584     LCD_WriteReg(ILI9325_R51H, (uint16_t)dwX2);
<a name="l00585"></a>00585     LCD_WriteReg(ILI9325_R52H, (uint16_t)dwY1);
<a name="l00586"></a>00586     LCD_WriteReg(ILI9325_R53H, (uint16_t)dwY2);
<a name="l00587"></a>00587 
<a name="l00588"></a>00588     <span class="comment">/* Set cursor */</span>
<a name="l00589"></a>00589     <a class="code" href="ili9325_8h.html#abd17dd1f5a569cb53ddbbc3c293b0c80" title="Set cursor of LCD srceen.">LCD_SetCursor</a>( dwX1, dwY1 );
<a name="l00590"></a>00590 
<a name="l00591"></a>00591     <span class="comment">/* Prepare to write in GRAM */</span>
<a name="l00592"></a>00592     <a class="code" href="ili9325_8h.html#a32191c468d4e86b00c5d4658cdc3952e" title="Prepare to write GRAM data.">LCD_WriteRAM_Prepare</a>();
<a name="l00593"></a>00593 
<a name="l00594"></a>00594     size = (dwX2 - dwX1 + 1) * (dwY2 - dwY1 + 1);
<a name="l00595"></a>00595     <span class="comment">/* Send pixels blocks =&gt; one SPI IT / block */</span>
<a name="l00596"></a>00596     blocks = size / LCD_DATA_CACHE_SIZE;
<a name="l00597"></a>00597     <span class="keywordflow">while</span> (blocks--)
<a name="l00598"></a>00598     {
<a name="l00599"></a>00599         LCD_WriteRAMBuffer(gLcdPixelCache, LCD_DATA_CACHE_SIZE);
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601     <span class="comment">/* Send remaining pixels */</span>
<a name="l00602"></a>00602     LCD_WriteRAMBuffer(gLcdPixelCache, size % LCD_DATA_CACHE_SIZE);
<a name="l00603"></a>00603 
<a name="l00604"></a>00604     <span class="comment">/* Reset the refresh window area */</span>
<a name="l00605"></a>00605     <span class="comment">/* Horizontal and Vertical RAM Address Position (R50h, R51h, R52h, R53h) */</span>
<a name="l00606"></a>00606     LCD_WriteReg(ILI9325_R50H, (uint16_t)0 ) ;
<a name="l00607"></a>00607     LCD_WriteReg(ILI9325_R51H, (uint16_t)<a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a> - 1 ) ;
<a name="l00608"></a>00608     LCD_WriteReg(ILI9325_R52H, (uint16_t)0) ;
<a name="l00609"></a>00609     LCD_WriteReg(ILI9325_R53H, (uint16_t)<a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a> - 1  ) ;
<a name="l00610"></a>00610 
<a name="l00611"></a>00611     <span class="keywordflow">return</span> 0 ;
<a name="l00612"></a>00612 }
<a name="l00613"></a>00613 <span class="comment"></span>
<a name="l00614"></a>00614 <span class="comment">/**</span>
<a name="l00615"></a>00615 <span class="comment"> * \brief Write several pixels pre-formatted in a bufer to LCD GRAM.</span>
<a name="l00616"></a>00616 <span class="comment"> *</span>
<a name="l00617"></a>00617 <span class="comment"> * \param dwX1      X-coordinate of upper-left corner on LCD.</span>
<a name="l00618"></a>00618 <span class="comment"> * \param dwY1      Y-coordinate of upper-left corner on LCD.</span>
<a name="l00619"></a>00619 <span class="comment"> * \param dwX2      X-coordinate of lower-right corner on LCD.</span>
<a name="l00620"></a>00620 <span class="comment"> * \param dwY2      Y-coordinate of lower-right corner on LCD.</span>
<a name="l00621"></a>00621 <span class="comment"> * \param pBuffer   LcdColor_t buffer area.</span>
<a name="l00622"></a>00622 <span class="comment"> */</span>
<a name="l00623"></a><a class="code" href="ili9325_8c.html#ac0626a83fe699a730ea22b7c7c9150bd">00623</a> <span class="keyword">extern</span> uint32_t <a class="code" href="ili9325_8h.html#ac0626a83fe699a730ea22b7c7c9150bd" title="Write several pixels pre-formatted in a bufer to LCD GRAM.">LCD_DrawPicture</a>( uint32_t dwX1, uint32_t dwY1, uint32_t dwX2, uint32_t dwY2, <span class="keyword">const</span> LcdColor_t *<a class="code" href="usart__hard__handshaking_2main_8c.html#aabcf6e8b1303ef001b5da6bdead0efc6">pBuffer</a> )
<a name="l00624"></a>00624 {
<a name="l00625"></a>00625     uint32_t size, blocks;
<a name="l00626"></a>00626     LcdColor_t currentColor;
<a name="l00627"></a>00627 
<a name="l00628"></a>00628     <span class="comment">/* Swap coordinates if necessary */</span>
<a name="l00629"></a>00629     CheckBoxCoordinates(&amp;dwX1, &amp;dwY1, &amp;dwX2, &amp;dwY2);
<a name="l00630"></a>00630 
<a name="l00631"></a>00631     <span class="comment">/* Determine the refresh window area */</span>
<a name="l00632"></a>00632     <span class="comment">/* Horizontal and Vertical RAM Address Position (R50h, R51h, R52h, R53h) */</span>
<a name="l00633"></a>00633     LCD_WriteReg(ILI9325_R50H, (uint16_t)dwX1 ) ;
<a name="l00634"></a>00634     LCD_WriteReg(ILI9325_R51H, (uint16_t)dwX2 ) ;
<a name="l00635"></a>00635     LCD_WriteReg(ILI9325_R52H, (uint16_t)dwY1 ) ;
<a name="l00636"></a>00636     LCD_WriteReg(ILI9325_R53H, (uint16_t)dwY2 ) ;
<a name="l00637"></a>00637 
<a name="l00638"></a>00638     <span class="comment">/* Set cursor */</span>
<a name="l00639"></a>00639     <a class="code" href="ili9325_8h.html#abd17dd1f5a569cb53ddbbc3c293b0c80" title="Set cursor of LCD srceen.">LCD_SetCursor</a>( dwX1, dwY1 );
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     <span class="comment">/* Prepare to write in GRAM */</span>
<a name="l00642"></a>00642     <a class="code" href="ili9325_8h.html#a32191c468d4e86b00c5d4658cdc3952e" title="Prepare to write GRAM data.">LCD_WriteRAM_Prepare</a>();
<a name="l00643"></a>00643 
<a name="l00644"></a>00644     size = (dwX2 - dwX1 + 1) * (dwY2 - dwY1 + 1);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     <span class="comment">/* Check if the buffer is within the SRAM */</span>
<a name="l00647"></a>00647     <span class="keywordflow">if</span> ((<a class="code" href="group___s_a_m3_s__definitions.html#gaae45ac2ef16942159481c767ac4805cf">IRAM_ADDR</a> &lt;= (uint32_t)pBuffer) &amp;&amp; ((uint32_t)pBuffer &lt; (<a class="code" href="group___s_a_m3_s__definitions.html#gaae45ac2ef16942159481c767ac4805cf">IRAM_ADDR</a>+IRAM_SIZE)))
<a name="l00648"></a>00648     {
<a name="l00649"></a>00649         LCD_WriteRAMBuffer(pBuffer, size);
<a name="l00650"></a>00650     }
<a name="l00651"></a>00651     <span class="comment">/* If the buffer is not in SRAM, transfer it in SRAM first before transfer */</span>
<a name="l00652"></a>00652     <span class="keywordflow">else</span>
<a name="l00653"></a>00653     {
<a name="l00654"></a>00654         <span class="comment">/* Use color buffer as a cache */</span>
<a name="l00655"></a>00655         currentColor = gLcdPixelCache[0];
<a name="l00656"></a>00656         <span class="comment">/* Send pixels blocks =&gt; one SPI IT / block */</span>
<a name="l00657"></a>00657         blocks = size / LCD_DATA_CACHE_SIZE;
<a name="l00658"></a>00658         <span class="keywordflow">while</span> (blocks--)
<a name="l00659"></a>00659         {
<a name="l00660"></a>00660             memcpy(gLcdPixelCache, pBuffer, LCD_DATA_CACHE_SIZE * <span class="keyword">sizeof</span>(LcdColor_t));
<a name="l00661"></a>00661             LCD_WriteRAMBuffer(gLcdPixelCache, LCD_DATA_CACHE_SIZE);
<a name="l00662"></a>00662             pBuffer += LCD_DATA_CACHE_SIZE;
<a name="l00663"></a>00663         }
<a name="l00664"></a>00664         <span class="comment">/* Send remaining pixels */</span>
<a name="l00665"></a>00665         memcpy(gLcdPixelCache, pBuffer, (size % LCD_DATA_CACHE_SIZE) * <span class="keyword">sizeof</span>(LcdColor_t));
<a name="l00666"></a>00666         LCD_WriteRAMBuffer(gLcdPixelCache, size % LCD_DATA_CACHE_SIZE);
<a name="l00667"></a>00667 
<a name="l00668"></a>00668         <span class="comment">/* Restore the color cache */</span>
<a name="l00669"></a>00669         <a class="code" href="ili9325_8h.html#adb29f5baaca6bac8047c2242b1295ba8" title="Convert 24 bit RGB color into 5-6-5 rgb color space.">LCD_SetColor</a>(currentColor);
<a name="l00670"></a>00670     }
<a name="l00671"></a>00671 
<a name="l00672"></a>00672     <span class="comment">/* Reset the refresh window area */</span>
<a name="l00673"></a>00673     <span class="comment">/* Horizontal and Vertical RAM Address Position (R50h, R51h, R52h, R53h) */</span>
<a name="l00674"></a>00674     LCD_WriteReg(ILI9325_R50H, (uint16_t)0 ) ;
<a name="l00675"></a>00675     LCD_WriteReg(ILI9325_R51H, (uint16_t)<a class="code" href="board_8h.html#a28796caac727f7f1cc8cdec643d657e3">BOARD_LCD_WIDTH</a> - 1 ) ;
<a name="l00676"></a>00676     LCD_WriteReg(ILI9325_R52H, (uint16_t)0 ) ;
<a name="l00677"></a>00677     LCD_WriteReg(ILI9325_R53H, (uint16_t)<a class="code" href="board_8h.html#a7aeb1d4accf2eba1f18172df9538380d">BOARD_LCD_HEIGHT</a> - 1 ) ;
<a name="l00678"></a>00678 
<a name="l00679"></a>00679     <span class="keywordflow">return</span> 0 ;
<a name="l00680"></a>00680 }
<a name="l00681"></a>00681 
<a name="l00682"></a>00682 <span class="comment">/*</span>
<a name="l00683"></a>00683 <span class="comment"> * \brief Draw a line on LCD, which is not horizontal or vertical.</span>
<a name="l00684"></a>00684 <span class="comment"> *</span>
<a name="l00685"></a>00685 <span class="comment"> * \param x         X-coordinate of line start.</span>
<a name="l00686"></a>00686 <span class="comment"> * \param y         Y-coordinate of line start.</span>
<a name="l00687"></a>00687 <span class="comment"> * \param length    line length.</span>
<a name="l00688"></a>00688 <span class="comment"> * \param direction line direction: 0 - horizontal, 1 - vertical.</span>
<a name="l00689"></a>00689 <span class="comment"> * \param color     LcdColor_t color.</span>
<a name="l00690"></a>00690 <span class="comment"> */</span>
<a name="l00691"></a>00691 <span class="keyword">static</span> uint32_t DrawLineBresenham( uint32_t dwX1, uint32_t dwY1, uint32_t dwX2, uint32_t dwY2 )
<a name="l00692"></a>00692 {
<a name="l00693"></a>00693     <span class="keywordtype">int</span> dx, dy ;
<a name="l00694"></a>00694     <span class="keywordtype">int</span> i ;
<a name="l00695"></a>00695     <span class="keywordtype">int</span> xinc, yinc, cumul ;
<a name="l00696"></a>00696     <span class="keywordtype">int</span> x, y ;
<a name="l00697"></a>00697 
<a name="l00698"></a>00698     x = dwX1 ;
<a name="l00699"></a>00699     y = dwY1 ;
<a name="l00700"></a>00700     dx = dwX2 - dwX1 ;
<a name="l00701"></a>00701     dy = dwY2 - dwY1 ;
<a name="l00702"></a>00702 
<a name="l00703"></a>00703     xinc = ( dx &gt; 0 ) ? 1 : -1 ;
<a name="l00704"></a>00704     yinc = ( dy &gt; 0 ) ? 1 : -1 ;
<a name="l00705"></a>00705     dx = ( dx &gt; 0 ) ? dx : -dx ;
<a name="l00706"></a>00706     dy = ( dy &gt; 0 ) ? dy : -dy ;
<a name="l00707"></a>00707 
<a name="l00708"></a>00708     <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>( x, y ) ;
<a name="l00709"></a>00709 
<a name="l00710"></a>00710     <span class="keywordflow">if</span> ( dx &gt; dy )
<a name="l00711"></a>00711     {
<a name="l00712"></a>00712       cumul = dx / 2 ;
<a name="l00713"></a>00713       <span class="keywordflow">for</span> ( i = 1 ; i &lt;= dx ; i++ )
<a name="l00714"></a>00714       {
<a name="l00715"></a>00715         x += xinc ;
<a name="l00716"></a>00716         cumul += dy ;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718         <span class="keywordflow">if</span> ( cumul &gt;= dx )
<a name="l00719"></a>00719         {
<a name="l00720"></a>00720           cumul -= dx ;
<a name="l00721"></a>00721           y += yinc ;
<a name="l00722"></a>00722         }
<a name="l00723"></a>00723         <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>( x, y ) ;
<a name="l00724"></a>00724       }
<a name="l00725"></a>00725     }
<a name="l00726"></a>00726     <span class="keywordflow">else</span>
<a name="l00727"></a>00727     {
<a name="l00728"></a>00728         cumul = dy / 2 ;
<a name="l00729"></a>00729         <span class="keywordflow">for</span> ( i = 1 ; i &lt;= dy ; i++ )
<a name="l00730"></a>00730         {
<a name="l00731"></a>00731             y += yinc ;
<a name="l00732"></a>00732             cumul += dx ;
<a name="l00733"></a>00733 
<a name="l00734"></a>00734             <span class="keywordflow">if</span> ( cumul &gt;= dy )
<a name="l00735"></a>00735             {
<a name="l00736"></a>00736                 cumul -= dy ;
<a name="l00737"></a>00737                 x += xinc ;
<a name="l00738"></a>00738             }
<a name="l00739"></a>00739 
<a name="l00740"></a>00740             <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>( x, y ) ;
<a name="l00741"></a>00741         }
<a name="l00742"></a>00742     }
<a name="l00743"></a>00743 
<a name="l00744"></a>00744     <span class="keywordflow">return</span> 0 ;
<a name="l00745"></a>00745 }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747 <span class="comment">/*</span>
<a name="l00748"></a>00748 <span class="comment"> * \brief Draw a line on LCD, horizontal and vertical line are supported.</span>
<a name="l00749"></a>00749 <span class="comment"> *</span>
<a name="l00750"></a>00750 <span class="comment"> * \param dwX1      X-coordinate of line start.</span>
<a name="l00751"></a>00751 <span class="comment"> * \param dwY1      Y-coordinate of line start.</span>
<a name="l00752"></a>00752 <span class="comment"> * \param dwX2      X-coordinate of line end.</span>
<a name="l00753"></a>00753 <span class="comment"> * \param dwY2      Y-coordinate of line end.</span>
<a name="l00754"></a>00754 <span class="comment">  */</span>
<a name="l00755"></a>00755 <span class="keyword">extern</span> uint32_t LCD_DrawLine ( uint32_t dwX1, uint32_t dwY1, uint32_t dwX2, uint32_t dwY2 )
<a name="l00756"></a>00756 {
<a name="l00757"></a>00757     <span class="comment">/* Optimize horizontal or vertical line drawing */</span>
<a name="l00758"></a>00758     <span class="keywordflow">if</span> (( dwY1 == dwY2 ) || (dwX1 == dwX2))
<a name="l00759"></a>00759     {
<a name="l00760"></a>00760         <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( dwX1, dwY1, dwX2, dwY2 );
<a name="l00761"></a>00761     }
<a name="l00762"></a>00762     <span class="keywordflow">else</span>
<a name="l00763"></a>00763     {
<a name="l00764"></a>00764         DrawLineBresenham( dwX1, dwY1, dwX2, dwY2 ) ;
<a name="l00765"></a>00765     }
<a name="l00766"></a>00766 
<a name="l00767"></a>00767     <span class="keywordflow">return</span> 0 ;
<a name="l00768"></a>00768 }
<a name="l00769"></a>00769 <span class="comment"></span>
<a name="l00770"></a>00770 <span class="comment">/**</span>
<a name="l00771"></a>00771 <span class="comment"> * \brief Draws a circle on LCD, at the given coordinates.</span>
<a name="l00772"></a>00772 <span class="comment"> *</span>
<a name="l00773"></a>00773 <span class="comment"> * \param dwX      X-coordinate of circle center.</span>
<a name="l00774"></a>00774 <span class="comment"> * \param dwY      Y-coordinate of circle center.</span>
<a name="l00775"></a>00775 <span class="comment"> * \param dwR      circle radius.</span>
<a name="l00776"></a>00776 <span class="comment">*/</span>
<a name="l00777"></a><a class="code" href="ili9325_8c.html#a0415f0ec6377db285ea598aee2f34620">00777</a> <span class="keyword">extern</span> uint32_t <a class="code" href="ili9325_8h.html#a0415f0ec6377db285ea598aee2f34620" title="Draws a circle on LCD, at the given coordinates.">LCD_DrawCircle</a>( uint32_t dwX, uint32_t dwY, uint32_t dwR )
<a name="l00778"></a>00778 {
<a name="l00779"></a>00779     int32_t   d;    <span class="comment">/* Decision Variable */</span>
<a name="l00780"></a>00780     uint32_t  curX; <span class="comment">/* Current X Value */</span>
<a name="l00781"></a>00781     uint32_t  curY; <span class="comment">/* Current Y Value */</span>
<a name="l00782"></a>00782 
<a name="l00783"></a>00783     <span class="keywordflow">if</span> (dwR == 0)
<a name="l00784"></a>00784     {
<a name="l00785"></a>00785         <span class="keywordflow">return</span> 0;
<a name="l00786"></a>00786     }
<a name="l00787"></a>00787     d = 3 - (dwR &lt;&lt; 1);
<a name="l00788"></a>00788     curX = 0;
<a name="l00789"></a>00789     curY = dwR;
<a name="l00790"></a>00790 
<a name="l00791"></a>00791     <span class="keywordflow">while</span> (curX &lt;= curY)
<a name="l00792"></a>00792     {
<a name="l00793"></a>00793         <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>(dwX + curX, dwY + curY);
<a name="l00794"></a>00794         <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>(dwX + curX, dwY - curY);
<a name="l00795"></a>00795         <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>(dwX - curX, dwY + curY);
<a name="l00796"></a>00796         <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>(dwX - curX, dwY - curY);
<a name="l00797"></a>00797         <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>(dwX + curY, dwY + curX);
<a name="l00798"></a>00798         <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>(dwX + curY, dwY - curX);
<a name="l00799"></a>00799         <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>(dwX - curY, dwY + curX);
<a name="l00800"></a>00800         <a class="code" href="ili9325_8h.html#a95791541b248a87610ca3b14c36097d8" title="Draw a LcdColor_t on LCD of given color.">LCD_DrawPixel</a>(dwX - curY, dwY - curX);
<a name="l00801"></a>00801 
<a name="l00802"></a>00802         <span class="keywordflow">if</span> (d &lt; 0)
<a name="l00803"></a>00803         {
<a name="l00804"></a>00804             d += (curX &lt;&lt; 2) + 6;
<a name="l00805"></a>00805         }
<a name="l00806"></a>00806         <span class="keywordflow">else</span>
<a name="l00807"></a>00807         {
<a name="l00808"></a>00808             d += ((curX - curY) &lt;&lt; 2) + 10;
<a name="l00809"></a>00809             curY--;
<a name="l00810"></a>00810         }
<a name="l00811"></a>00811         curX++;
<a name="l00812"></a>00812     }
<a name="l00813"></a>00813     <span class="keywordflow">return</span> 0;
<a name="l00814"></a>00814 }
<a name="l00815"></a>00815 
<a name="l00816"></a>00816 <span class="keyword">extern</span> uint32_t LCD_DrawFilledCircle( uint32_t dwX, uint32_t dwY, uint32_t dwRadius)
<a name="l00817"></a>00817 {
<a name="l00818"></a>00818     <span class="keywordtype">signed</span> <span class="keywordtype">int</span> d ; <span class="comment">/* Decision Variable */</span>
<a name="l00819"></a>00819     uint32_t dwCurX ; <span class="comment">/* Current X Value */</span>
<a name="l00820"></a>00820     uint32_t dwCurY ; <span class="comment">/* Current Y Value */</span>
<a name="l00821"></a>00821     uint32_t dwXmin, dwYmin;
<a name="l00822"></a>00822 
<a name="l00823"></a>00823     <span class="keywordflow">if</span> (dwRadius == 0)
<a name="l00824"></a>00824     {
<a name="l00825"></a>00825         <span class="keywordflow">return</span> 0;
<a name="l00826"></a>00826     }
<a name="l00827"></a>00827     d = 3 - (dwRadius &lt;&lt; 1) ;
<a name="l00828"></a>00828     dwCurX = 0 ;
<a name="l00829"></a>00829     dwCurY = dwRadius ;
<a name="l00830"></a>00830 
<a name="l00831"></a>00831     <span class="keywordflow">while</span> ( dwCurX &lt;= dwCurY )
<a name="l00832"></a>00832     {
<a name="l00833"></a>00833         dwXmin = (dwCurX &gt; dwX) ? 0 : dwX-dwCurX;
<a name="l00834"></a>00834         dwYmin = (dwCurY &gt; dwY) ? 0 : dwY-dwCurY;
<a name="l00835"></a>00835         <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( dwXmin, dwYmin, dwX+dwCurX, dwYmin ) ;
<a name="l00836"></a>00836         <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( dwXmin, dwY+dwCurY, dwX+dwCurX, dwY+dwCurY ) ;
<a name="l00837"></a>00837         dwXmin = (dwCurY &gt; dwX) ? 0 : dwX-dwCurY;
<a name="l00838"></a>00838         dwYmin = (dwCurX &gt; dwY) ? 0 : dwY-dwCurX;
<a name="l00839"></a>00839         <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( dwXmin, dwYmin, dwX+dwCurY, dwYmin ) ;
<a name="l00840"></a>00840         <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( dwXmin, dwY+dwCurX, dwX+dwCurY, dwY+dwCurX ) ;
<a name="l00841"></a>00841 
<a name="l00842"></a>00842         <span class="keywordflow">if</span> ( d &lt; 0 )
<a name="l00843"></a>00843         {
<a name="l00844"></a>00844             d += (dwCurX &lt;&lt; 2) + 6 ;
<a name="l00845"></a>00845         }
<a name="l00846"></a>00846         <span class="keywordflow">else</span>
<a name="l00847"></a>00847         {
<a name="l00848"></a>00848             d += ((dwCurX - dwCurY) &lt;&lt; 2) + 10;
<a name="l00849"></a>00849             dwCurY-- ;
<a name="l00850"></a>00850         }
<a name="l00851"></a>00851 
<a name="l00852"></a>00852         dwCurX++ ;
<a name="l00853"></a>00853     }
<a name="l00854"></a>00854 
<a name="l00855"></a>00855     <span class="keywordflow">return</span> 0 ;
<a name="l00856"></a>00856 }
<a name="l00857"></a>00857 
<a name="l00858"></a>00858 <span class="keyword">extern</span> uint32_t LCD_DrawRectangle( uint32_t dwX1, uint32_t dwY1, uint32_t dwX2, uint32_t dwY2 )
<a name="l00859"></a>00859 {
<a name="l00860"></a>00860     CheckBoxCoordinates(&amp;dwX1, &amp;dwY1, &amp;dwX2, &amp;dwY2);
<a name="l00861"></a>00861 
<a name="l00862"></a>00862     <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( dwX1, dwY1, dwX2, dwY1 ) ;
<a name="l00863"></a>00863     <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( dwX1, dwY2, dwX2, dwY2 ) ;
<a name="l00864"></a>00864 
<a name="l00865"></a>00865     <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( dwX1, dwY1, dwX1, dwY2 ) ;
<a name="l00866"></a>00866     <a class="code" href="ili9325_8h.html#aad99f49d91d11c317408aad209a08bea" title="Write several pixels with the same color to LCD GRAM.">LCD_DrawFilledRectangle</a>( dwX2, dwY1, dwX2, dwY2 ) ;
<a name="l00867"></a>00867 
<a name="l00868"></a>00868     <span class="keywordflow">return</span> 0 ;
<a name="l00869"></a>00869 }
<a name="l00870"></a>00870 
<a name="l00871"></a>00871 <span class="comment"></span>
<a name="l00872"></a>00872 <span class="comment">/**</span>
<a name="l00873"></a>00873 <span class="comment"> * \brief Set the backlight of the LCD (AAT3155).</span>
<a name="l00874"></a>00874 <span class="comment"> *</span>
<a name="l00875"></a>00875 <span class="comment"> * \param level   Backlight brightness level [1..16], 1 means maximum brightness.</span>
<a name="l00876"></a>00876 <span class="comment"> */</span>
<a name="l00877"></a><a class="code" href="ili9325_8c.html#ad29b22522a6392af0aeca59b7a2154ff">00877</a> <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="ili9325_8h.html#ad29b22522a6392af0aeca59b7a2154ff" title="Set the backlight of the LCD (AAT3155).">LCD_SetBacklight</a> (uint32_t level)
<a name="l00878"></a>00878 {
<a name="l00879"></a>00879     uint32_t i;
<a name="l00880"></a>00880     <span class="keyword">const</span> <a class="code" href="struct_pin.html">Pin</a> pPins[] = {<a class="code" href="board_8h.html#ac09b616e40e707b51c75f7272cc5e936">BOARD_BACKLIGHT_PIN</a>};
<a name="l00881"></a>00881 
<a name="l00882"></a>00882     <span class="comment">/* Ensure valid level */</span>
<a name="l00883"></a>00883     level = (level &lt; 1) ? 1 : level;
<a name="l00884"></a>00884     level = (level &gt; 16) ? 16 : level;
<a name="l00885"></a>00885 
<a name="l00886"></a>00886     <span class="comment">/* Enable pins */</span>
<a name="l00887"></a>00887     <a class="code" href="pio_8h.html#a1bb66b931fa38004c2178936c269fa76" title="Configures a list of Pin instances, each of which can either hold a single pin or a group of pins...">PIO_Configure</a>(pPins, <a class="code" href="pio_8h.html#a2e86ed748eb3ae9574ac9822e67154f6">PIO_LISTSIZE</a>(pPins));
<a name="l00888"></a>00888 
<a name="l00889"></a>00889     <span class="comment">/* Switch off backlight */</span>
<a name="l00890"></a>00890     <a class="code" href="pio_8h.html#a2d4d88110e7ab4fc0732df6d35289e06" title="Sets a low output level on all the PIOs defined in the given Pin instance. This has no immediate effe...">PIO_Clear</a>(pPins);
<a name="l00891"></a>00891     i = 600 * (<a class="code" href="board_8h.html#ae9cca1603768bb2e6c82bd0ccedf2b5c">BOARD_MCK</a> / 1000000);    <span class="comment">/* wait for at least 500us */</span>
<a name="l00892"></a>00892     <span class="keywordflow">while</span>(i--);
<a name="l00893"></a>00893 
<a name="l00894"></a>00894     <span class="comment">/* Set new backlight level */</span>
<a name="l00895"></a>00895     <span class="keywordflow">for</span> (i = 0; i &lt; level; i++)
<a name="l00896"></a>00896     {
<a name="l00897"></a>00897         <a class="code" href="pio_8h.html#a2d4d88110e7ab4fc0732df6d35289e06" title="Sets a low output level on all the PIOs defined in the given Pin instance. This has no immediate effe...">PIO_Clear</a>(pPins);
<a name="l00898"></a>00898         <a class="code" href="pio_8h.html#a2d4d88110e7ab4fc0732df6d35289e06" title="Sets a low output level on all the PIOs defined in the given Pin instance. This has no immediate effe...">PIO_Clear</a>(pPins);
<a name="l00899"></a>00899         <a class="code" href="pio_8h.html#a2d4d88110e7ab4fc0732df6d35289e06" title="Sets a low output level on all the PIOs defined in the given Pin instance. This has no immediate effe...">PIO_Clear</a>(pPins);
<a name="l00900"></a>00900 
<a name="l00901"></a>00901         <a class="code" href="pio_8h.html#aac9a3cac1a51b45f82b30bd7a29826a6" title="Sets a high output level on all the PIOs defined in the given Pin instance. This has no immediate eff...">PIO_Set</a>(pPins);
<a name="l00902"></a>00902         <a class="code" href="pio_8h.html#aac9a3cac1a51b45f82b30bd7a29826a6" title="Sets a high output level on all the PIOs defined in the given Pin instance. This has no immediate eff...">PIO_Set</a>(pPins);
<a name="l00903"></a>00903         <a class="code" href="pio_8h.html#aac9a3cac1a51b45f82b30bd7a29826a6" title="Sets a high output level on all the PIOs defined in the given Pin instance. This has no immediate eff...">PIO_Set</a>(pPins);
<a name="l00904"></a>00904     }
<a name="l00905"></a>00905 }
<a name="l00906"></a>00906 
<a name="l00907"></a>00907 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
